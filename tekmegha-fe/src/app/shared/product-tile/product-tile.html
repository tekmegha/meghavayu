<div class="product-tile">
  <div class="product-tile-card">
    <div class="image-wrapper">
      <img [src]="product.imageUrl" [alt]="product.name" class="product-image" (error)="onImageError($event)">
      @if (product.discountPercentage) {
        <div class="discount-badge">{{ product.discountPercentage }}% OFF</div>
      }
      <div class="favorite-icon"><span class="material-icons">star</span></div>
    </div>
    <div class="product-info">
      <h3 class="product-name">{{ product.name }}</h3>
      <p class="product-description">{{ product.description }}</p>
      <div class="price-and-add">
        <div class="prices">
          <span class="current-price">₹{{ product.price | number:'1.2-2' }}</span>
          @if (product.oldPrice) {
            <span class="old-price">₹{{ product.oldPrice | number:'1.2-2' }}</span>
          }
        </div>
        @if (quantity === 0) {
          <button class="add-to-cart-button" (click)="onAdd()">Add</button>
        } @else {
          <div class="quantity-controls">
            <button class="quantity-btn minus" (click)="onDecrement()">-</button>
            <span class="quantity-display">{{ quantity }}</span>
            <button class="quantity-btn plus" (click)="onIncrement()">+</button>
          </div>
        }
      </div>
    </div>
  </div>
</div>
